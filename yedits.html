<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Yedits</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#fff;color:#111;line-height:1.55;-webkit-font-smoothing:antialiased}
h1,h2{font-weight:700;letter-spacing:-.02em}
.container{width:100%;max-width:640px;margin:0 auto;padding:2rem 1.5rem}
a,button{display:inline-block;text-decoration:none;color:#111;background:transparent;border:1px solid #111;padding:.75rem 1.5rem;font-weight:600;cursor:pointer;transition:background .2s,color .2s}
a:hover,button:hover{background:#111;color:#fff}
ul{list-style:none}
ul li{padding:.75rem .5rem;cursor:pointer;transition:background .15s}
ul li:hover{background:#f5f5f5}
ul.divide-y>li+li{border-top:1px solid #e5e5e5}
.player{position:fixed;bottom:0;left:0;right:0;background:#fafafa;border-top:1px solid #e5e5e5;padding:1rem;display:flex;align-items:center;gap:1rem}
.player button{width:2.5rem;height:2.5rem;padding:0;border-radius:50%}
.player button:hover{background:#111;color:#fff}
#loading{padding:2rem 0;text-align:center;font-style:italic}
</style>
</head>
<body>
  <div class="container">
    <a href="index.html">Back</a>
    <h2 style="margin:2rem 0 1rem 0">yedits</h2>
    <ul id="trackList" class="divide-y"></ul>
    <div id="loading">loadingâ€¦</div>
  </div>
  <div id="playerBar" class="player" hidden>
    <button id="playBtn">&gt;</button>
    <div>
      <div id="trackTitle" style="font-weight:700"></div>
      <div id="trackArtist" style="font-size:.875rem;color:#666"></div>
    </div>
    <audio id="audio" preload="none"></audio>
  </div>
<script>
(function(){
  const cat = "yedits";
  const API_BASE = "";
  const list = document.getElementById("trackList");
  const loading = document.getElementById("loading");
  const bar = document.getElementById("playerBar");
  const audio = document.getElementById("audio");
  const playBtn = document.getElementById("playBtn");
  const ttl = document.getElementById("trackTitle");
  const art = document.getElementById("trackArtist");
  fetch(API_BASE + "/api/tracks/" + cat)
    .then(r=>r.json())
    .then(tracks=>{
      loading.remove();
      tracks.forEach(t=>{
        const li=document.createElement("li");
        li.textContent=t.title+" - "+t.artist;
        li.onclick=()=>playTrack(t);
        list.appendChild(li);
      });
    })
    .catch(()=>{loading.textContent="error loading list";});
  function playTrack(t){
    audio.src=API_BASE + "/api/stream/" + t.cat + "/" + t.rel;
    audio.play();
    bar.hidden=false;
    ttl.textContent=t.title;
    art.textContent=t.artist;
    playBtn.textContent="||";
  }
  playBtn.onclick=()=>{if(audio.paused){audio.play();playBtn.textContent="||";}else{audio.pause();playBtn.textContent=">";}};
})();
</script>
</body>
</html>
